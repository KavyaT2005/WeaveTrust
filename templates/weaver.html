<!DOCTYPE html>
<html>
<head>
<style>
body{margin:0;background:#eee;font-family:sans-serif}
.top{background:#3b73d1;color:white;padding:15px}

.card{
width:420px;margin:30px auto;background:white;
padding:25px;border-radius:12px;
box-shadow:0 0 12px #ccc}

input{
width:100%;padding:10px;margin:8px 0;
border:1px solid #ccc;border-radius:6px}

button{
background:#3b73d1;color:white;border:none;
padding:12px;width:100%;
border-radius:6px;font-weight:bold}

table{
width:60%;margin:30px auto;background:white;
border-collapse:collapse;box-shadow:0 0 10px #ccc}

td,th{padding:10px;border:1px solid #ddd;text-align:center}
a{color:#3b73d1;text-decoration:none;font-weight:bold}
</style>
</head>

<body>

<div class="top">
Weaver Dashboard | {{session.user}}
<a href="/logout" style="color:white;float:right">Logout</a>
</div>

<!-- ðŸ”¹ UPDATE PRODUCED METERS (TOP) -->
<div class="card">
<h3>Update Produced Meters</h3>
<form method="post">
<input name="id" placeholder="Order ID" required>
<input name="meters" placeholder="Meters produced today" required>
<button>Update</button>
</form>
</div>

<!-- ðŸ”¹ CONNECTED OWNERS (BELOW UPDATE FORM) -->
<h2 style="text-align:center">Connected Owners</h2>

<table>
<tr>
<th>Owner Name</th>
<th>View Orders</th>
</tr>

{% set owners = orders | map(attribute='owner') | list | unique %}

{% if owners %}
    {% for owner_name in owners %}
    <tr>
        <td>{{owner_name}}</td>
        <td>
            <a href="/weaver/owner/{{owner_name}}">
                View Orders
            </a>
        </td>
    </tr>
    {% endfor %}
{% else %}
<tr>
<td colspan="2">No owners assigned yet</td>
</tr>
{% endif %}

</table>

</body>
</html>
